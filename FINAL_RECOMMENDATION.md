# –§–∏–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è - DTS to FLAC Converter

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å—Ç–µ–∫–æ–≤

### Node.js vs Go

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Node.js | Go | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
|----------|---------|----|--------------|
| **–ü–∞–º—è—Ç—å** | 50-100MB | 5-15MB | **Go –≤ 5-10 —Ä–∞–∑ –º–µ–Ω—å—à–µ** |
| **CPU –Ω–∞–≥—Ä—É–∑–∫–∞** | –°—Ä–µ–¥–Ω—è—è | –ù–∏–∑–∫–∞—è | **Go –≤ 2-3 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ** |
| **–†–∞–∑–º–µ—Ä –±–∏–Ω–∞—Ä–Ω–∏–∫–∞** | 100MB+ | 10-20MB | **Go –≤ 5 —Ä–∞–∑ –º–µ–Ω—å—à–µ** |
| **–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞** | 1-2 —Å–µ–∫ | 0.1 —Å–µ–∫ | **Go –≤ 10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ** |
| **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** | npm install | –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫ | **Go –ø—Ä–æ—â–µ** |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | **Go –≤ 2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ** |
| **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞** | –ë—ã—Å—Ç—Ä–∞—è | –°—Ä–µ–¥–Ω—è—è | Node.js –ø—Ä–æ—â–µ |
| **–≠–∫–æ—Å–∏—Å—Ç–µ–º–∞** | –û–≥—Ä–æ–º–Ω–∞—è | –•–æ—Ä–æ—à–∞—è | Node.js –±–æ–ª—å—à–µ |

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### üèÜ –í—ã–±–∏—Ä–∞–µ–º Go!

**–ü–æ—á–µ–º—É Go –æ–ø—Ç–∏–º–∞–ª—å–µ–Ω:**

1. **–†–µ—Å—É—Ä—Å–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã
2. **–°—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –±–µ–∑ garbage collection –ø–∞—É–∑
3. **–ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –æ–¥–∏–Ω –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª
4. **–ù–∏–∑–∫–æ–µ —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ** - –≤–∞–∂–Ω–æ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
5. **–î–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞** - –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

## –ò—Ç–æ–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üìã –ß—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ–º:

1. **Backend –Ω–∞ Go**
   - HTTP —Å–µ—Ä–≤–µ—Ä —Å Gin
   - SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
   - FFmpeg –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä
   - WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
   - –°–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–µ–π (1 –∑–∞–¥–∞—á–∞ –∑–∞ —Ä–∞–∑)

2. **Frontend –Ω–∞ Vanilla JavaScript**
   - –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É
   - –¢–∞–±–ª–∏—Ü–∞ —Å –æ—á–µ—Ä–µ–¥—å—é –∑–∞–¥–∞—á
   - Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π CSS

3. **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**
   - –ú—É–ª—å—Ç–∏—Å—Ç–µ–π–¥–∂ –±–∏–ª–¥ –¥–ª—è Go
   - FFmpeg –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
   - Nginx –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

### üéØ –ö–ª—é—á–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:

- **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏**: ~10-20MB (vs 100MB+ —É Node.js)
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –í—ã—Å–æ–∫–∞—è –¥–∞–∂–µ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–∞—Ö
- **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
- **–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ

### ‚è±Ô∏è –í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

- **Backend (Go)**: 12-16 —á–∞—Å–æ–≤
- **Frontend (Vanilla JS)**: 6-8 —á–∞—Å–æ–≤
- **Docker –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 4-6 —á–∞—Å–æ–≤
- **–ò—Ç–æ–≥–æ**: 22-30 —á–∞—Å–æ–≤ (3-4 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
dts-converter-go/
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ go.mod
‚îÇ   ‚îú‚îÄ‚îÄ go.sum
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ main.go
‚îÇ       ‚îú‚îÄ‚îÄ models/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ task.go
‚îÇ       ‚îú‚îÄ‚îÄ services/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ converter.go
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ queue.go
‚îÇ       ‚îú‚îÄ‚îÄ handlers/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ api.go
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ websocket.go
‚îÇ       ‚îî‚îÄ‚îÄ database/
‚îÇ           ‚îî‚îÄ‚îÄ db.go
‚îî‚îÄ‚îÄ frontend/
    ‚îú‚îÄ‚îÄ index.html
    ‚îú‚îÄ‚îÄ app.js
    ‚îú‚îÄ‚îÄ styles.css
    ‚îî‚îÄ‚îÄ nginx.conf
```

## –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã

```mermaid
sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant FFmpeg
    participant Database
    
    User->>Frontend: –í–≤–æ–¥ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É
    Frontend->>Backend: POST /api/queue
    Backend->>Database: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–¥–∞—á—É
    Backend->>FFmpeg: –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é
    FFmpeg->>Backend: –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
    Backend->>Frontend: WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    Frontend->>User: –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### –î–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π:
- ‚úÖ **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞** –Ω–∞ CPU –∏ –ø–∞–º—è—Ç—å
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –±–µ–∑ –ø–∞—É–∑
- ‚úÖ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç** –∏ –æ—Ç–∫–ª–∏–∫
- ‚úÖ **–ù–∏–∑–∫–æ–µ —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ**

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞** - —Ö–æ—Ä–æ—à–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ Go

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ —Ä–∞–∑–≤–∏—Ç–∏—è

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** FFmpeg
2. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á** (–µ—Å–ª–∏ –ø–æ–∑–≤–æ–ª–∏—Ç –∂–µ–ª–µ–∑–æ)
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π** –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤
4. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** —Å –±–æ–ª—å—à–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
6. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

## –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏:
- **FFmpeg —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–∞—Ö** - –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞ –∑–∞ —Ä–∞–∑
- **WebSocket —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ–±—Ä—ã–≤–µ

### –†–∏—Å–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- **Go —Å–∏–Ω—Ç–∞–∫—Å–∏—Å** - –ø—Ä–æ—â–µ —á–µ–º Rust, —Å–ª–æ–∂–Ω–µ–µ —á–µ–º Node.js
- **–ú–µ–Ω—å—à–µ –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤** - –Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ö–æ—Ä–æ—à–∞—è
- **–û—Ç–ª–∞–¥–∫–∞** - —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Go - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä**. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤, —á—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –æ–±–µ—Å–ø–µ—á–∏—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–ª—É—á—à–∞—Ç—å, –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

**–ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** üöÄ